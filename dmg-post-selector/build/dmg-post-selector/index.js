(()=>{"use strict";var e,r={236:()=>{const e=window.wp.blocks,r=(window.wp.i18n,window.wp.blockEditor),t=window.wp.components,s=window.wp.data,o=window.wp.element,n=window.ReactJSXRuntime,l=JSON.parse('{"UU":"create-block/dmg-post-selector"}');(0,e.registerBlockType)(l.UU,{edit:function({attributes:e,setAttributes:l}){const{selectedPostTitle:i,selectedPostLink:c}=e,[d,a]=(0,o.useState)(""),[p,h]=(0,o.useState)(1),u=(0,s.useSelect)(e=>{const{getEntityRecords:r}=e("core");return r("postType","post",{per_page:-1,orderby:"date",order:"asc"})},[]),x=null!=u?u:[],g=(0,o.useMemo)(()=>x.filter(e=>{if(!d)return!0;const r=d.toLowerCase(),t=e.title.rendered.toLowerCase().includes(r),s=e.id.toString()===d.trim();return t||s}),[x,d]),m=Math.ceil(g.length/5),j=(0,o.useMemo)(()=>g.slice(5*(p-1),5*p),[g,p,5]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(r.InspectorControls,{children:[(0,n.jsx)(t.TextControl,{label:"Search posts",value:d,onChange:e=>{a(e),h(1)},placeholder:"Enter title or ID",className:"dmg-post-selector-search"}),(0,n.jsxs)(t.PanelBody,{title:"Select a Post",initialOpen:!0,children:[u?0===g.length?(0,n.jsx)("p",{style:{fontStyle:"italic",color:"#ff0000"},children:"No posts found."}):(0,n.jsx)("ul",{children:j.map(e=>{const r=(e.excerpt?.rendered||"").replace(/<[^>]+>/g,"").split(/\s+/).slice(0,20).join(" ")+"...";return(0,n.jsxs)("li",{onClick:()=>l({selectedPostTitle:e.title.rendered,selectedPostLink:e.link}),children:[(0,n.jsx)("p",{children:(0,n.jsx)("strong",{children:e.title.rendered})}),(0,n.jsx)("p",{children:r})]},e.id)})}):(0,n.jsx)(t.Spinner,{}),m>1&&(0,n.jsxs)("div",{className:"dmg-post-selector-pagination",children:[(0,n.jsx)(t.Button,{onClick:()=>{p>1&&h(p-1)},disabled:1===p,children:"Previous"}),(0,n.jsxs)("span",{children:["Page ",p," of ",m]}),(0,n.jsx)(t.Button,{onClick:()=>{p<m&&h(p+1)},disabled:p===m,children:"Next"})]})]})]}),(0,n.jsx)("div",{...(0,r.useBlockProps)(),children:i&&c?(0,n.jsx)("p",{className:"dmg-read-more",children:(0,n.jsx)("a",{href:c,target:"_blank",rel:"noopener noreferrer",children:i})}):(0,n.jsx)("p",{children:"Select a post in the inspector - "})})]})},save:function({attributes:e}){const{selectedPostTitle:t,selectedPostLink:s}=e;return(0,n.jsx)("div",{...r.useBlockProps.save(),children:t&&s?(0,n.jsxs)("p",{className:"dmg-read-more",children:["Read more: ",(0,n.jsx)("a",{href:s,target:"_blank",rel:"noopener noreferrer",children:t})]}):(0,n.jsx)("p",{className:"dmg-read-more",children:"No post selected."})})}})}},t={};function s(e){var o=t[e];if(void 0!==o)return o.exports;var n=t[e]={exports:{}};return r[e](n,n.exports,s),n.exports}s.m=r,e=[],s.O=(r,t,o,n)=>{if(!t){var l=1/0;for(a=0;a<e.length;a++){for(var[t,o,n]=e[a],i=!0,c=0;c<t.length;c++)(!1&n||l>=n)&&Object.keys(s.O).every(e=>s.O[e](t[c]))?t.splice(c--,1):(i=!1,n<l&&(l=n));if(i){e.splice(a--,1);var d=o();void 0!==d&&(r=d)}}return r}n=n||0;for(var a=e.length;a>0&&e[a-1][2]>n;a--)e[a]=e[a-1];e[a]=[t,o,n]},s.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),(()=>{var e={67:0,75:0};s.O.j=r=>0===e[r];var r=(r,t)=>{var o,n,[l,i,c]=t,d=0;if(l.some(r=>0!==e[r])){for(o in i)s.o(i,o)&&(s.m[o]=i[o]);if(c)var a=c(s)}for(r&&r(t);d<l.length;d++)n=l[d],s.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return s.O(a)},t=globalThis.webpackChunkdmg_post_selector=globalThis.webpackChunkdmg_post_selector||[];t.forEach(r.bind(null,0)),t.push=r.bind(null,t.push.bind(t))})();var o=s.O(void 0,[75],()=>s(236));o=s.O(o)})();